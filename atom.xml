<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>迈萌安全博客</title>
  
  <subtitle>web安全/区块链安全</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://magicming.cc/"/>
  <updated>2019-04-13T05:14:14.328Z</updated>
  <id>https://magicming.cc/</id>
  
  <author>
    <name>迈萌</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>区块链域名解析服务emerdns初探</title>
    <link href="https://magicming.cc/2019/04/emerdns/"/>
    <id>https://magicming.cc/2019/04/emerdns/</id>
    <published>2019-04-12T04:37:46.000Z</published>
    <updated>2019-04-13T05:14:14.328Z</updated>
    
    <content type="html"><![CDATA[<p>前段时间看360netlab的一篇文章<a href="https://blog.netlab.360.com/fbot-a-satori-related-block-chain-dns-based-worm/" target="_blank" rel="noopener">基于区块链DNS的Fbot蠕虫</a>，文中提到的Fbot蠕虫，其C2用到了区块链域名解析服务emerDNS，觉得挺有意思，一直念念不忘，最近抽出空来，初步学习下。</p><h1 id="emerCoin简介"><a href="#emerCoin简介" class="headerlink" title="emerCoin简介"></a>emerCoin简介</h1><p>emerCoin是一个区块链项目，提供多个分布式服务，比如分布式域名解析<strong>emerDNS</strong>、分布式密钥管理emerSSH、分布式证书管理emerSSL等。要使用emerDNS，首先要有钱包，还要充一点币，下面具体介绍。</p><h1 id="安装emerCoin钱包"><a href="#安装emerCoin钱包" class="headerlink" title="安装emerCoin钱包"></a>安装emerCoin钱包</h1><p>首先到官网下载emerCoin钱包，下载地址<a href="http://www.emercoin.com/zh/for-coinholders#download" target="_blank" rel="noopener">点这里</a>。下载钱包后，按照提示安装，第一次打开需要同步区块数据，数据量不大，大概几十分钟就可同步完毕，我这里安装的是mac版，最终打开后的界面是这样：</p><p><img src="/2019/04/emerdns/wallet1.jpg" alt="pic"></p><p>然后你需要为自己充一些emerCoin币，可以从以下交易所充值：<br><img src="/2019/04/emerdns/exchange1.jpg" alt="pic"><br>我选的是hitbtc交易所，购买emerCoin币后，将其提现到自己的钱包，具体流程和转账比特币类似，具体不细说了。现在我们的钱包有了一些emerCoin币，点击钱包的Manage Names栏目，我们能看到DNS设置按钮，如下：</p><p><img src="/2019/04/emerdns/wallet-dns.jpg" alt="pic"><br>在具体设置之前，我们先看下emerDNS介绍。</p><h1 id="emerDNS简介"><a href="#emerDNS简介" class="headerlink" title="emerDNS简介"></a>emerDNS简介</h1><p>什么是emerDNS？简单说就是把域名解析过程放在区块链上进行。有啥好处呢？按照官方的说法是这样：</p><blockquote><p>你是否担心自己的网站某一天被关停？随着全球管控力度的加强，这种担心不无道理。EmerDNS可免除这一烦恼。EmerDNS完全去中心化，不受任何管控影响。没有人可以修改你的记录，只有记录创建者才能操作记录内容。在多个浏览器扩展的帮助下，通过OpenNIC服务器或代理可轻松解析EmerDNS网站。</p></blockquote><blockquote><p>EmerDNS是一个去中心化的域名系统，支持各种DNS记录。EmerDNS在Emercoin <strong>NVS</strong>中的服务缩写”dns”下运行。</p></blockquote><p>上面提到的NVS是什么？全称是Name Value System，就是一个键值对数据库，写过代码的肯定都知道。到这你可能猜出来了，name里存储域名，value里存储解析记录。我们看下一个典型的emerDNS记录格式。先打开emercoin NVS区块浏览器，地址如下：<a href="https://explorer.emercoin.com/nvs" target="_blank" rel="noopener">https://explorer.emercoin.com/nvs</a></p><p>type框里输入dns，点击搜索，典型的dns记录格式如下：</p><p><img src="/2019/04/emerdns/search.jpg" alt="pic"></p><p>我们再回来看看钱包里怎么设置dns，点击dns按钮，弹出子窗口，填写dns name和对应记录即可，这里我添加的A记录94.23.252.190是namecoin官网的地址，如下：</p><p><img src="/2019/04/emerdns/dns2.jpg" alt="p"></p><p>点击OK，回到主界面，我们能看到键值操作有NAME_NEW、NAME_UPDATE、NAME_DELETE三种，这里我们是新增一条A记录，选默认的NAME_NEW即可，点击submit，就会把记录提交到区块链网络中，需要一段时间同步，耐心等会，如下：</p><p><img src="/2019/04/emerdns/submit.jpg" alt="p"></p><p>我们在回到nvs浏览器看下，果然，有记录了，如下：<br><img src="/2019/04/emerdns/value.jpg" alt="p"><br>下面我们看看解析emerdns有哪些方式。</p><h1 id="解析emerDNS的五种方式"><a href="#解析emerDNS的五种方式" class="headerlink" title="解析emerDNS的五种方式"></a>解析emerDNS的五种方式</h1><h2 id="使用OpenNIC-DNS"><a href="#使用OpenNIC-DNS" class="headerlink" title="使用OpenNIC DNS"></a>使用OpenNIC DNS</h2><p>使用openNIC DNS服务，这应该是最方便的方式了，把本机DNS设成openNIC的dns地址，即可访问各种非标准域名。<a href="https://magicming.cc">迈萌</a>我整理了下，openNIC支持解析的非标准域名有.bit、.coin、.lib、.emc等。</p><p>openNIC 所有dns 地址见<a href="https://servers.opennic.org" target="_blank" rel="noopener">servers.opennic.org</a>，从中抽取一个，设置本机dns为176.126.70.119，然后用浏览器访问我们前面设置的emerDNS域名<a href="magicming.lib">magicming.lib</a>，果然跳转到namecoin的官网，为优秀的自己点个赞，如下：</p><p><img src="/2019/04/emerdns/lib.jpg" alt="p"></p><h2 id="使用dig命令"><a href="#使用dig命令" class="headerlink" title="使用dig命令"></a>使用dig命令</h2><p>也可以用下面命令dig一下，通过应答的A记录能看出确实是前面设置的ip，</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dig @176.126.70.119 magicking.lib</span><br></pre></td></tr></table></figure><p>应答如下：</p><p><img src="/2019/04/emerdns/dig.jpg" alt="p"></p><h2 id="使用浏览器插件"><a href="#使用浏览器插件" class="headerlink" title="使用浏览器插件"></a>使用浏览器插件</h2><p>访问<a href="https://peername.com/browser-extension/" target="_blank" rel="noopener">peername</a>，下载对应浏览器插件，我下载的是chrome版，安装后浏览器右上角多了一个地球图标，注意该插件和代理类插件冲突，顺利话就可以访问<a href="http://magicming.lib" target="_blank" rel="noopener">http://magicming.lib</a> 了，如下：<br><img src="/2019/04/emerdns/exten.jpg" alt="p"></p><h2 id="使用钱包内置的控制台"><a href="#使用钱包内置的控制台" class="headerlink" title="使用钱包内置的控制台"></a>使用钱包内置的控制台</h2><p>进入emerCoin钱包，打开 菜单—&gt; 帮助—&gt; 调试窗口—&gt; 控制台，输入help可查看所有命令，dns相关命令如下：<br><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name_show <span class="built_in">[name</span>] [valuetype] [filepath]</span><br><span class="line">name_new <span class="xml"><span class="tag">&lt;<span class="name">name</span>&gt;</span> </span><span class="xml"><span class="tag">&lt;<span class="name">value</span>&gt;</span> </span><span class="xml"><span class="tag">&lt;<span class="name">days</span>&gt;</span> [toaddress] [valuetype]</span></span><br><span class="line"><span class="xml">name_update </span><span class="xml"><span class="tag">&lt;<span class="name">name</span>&gt;</span> </span><span class="xml"><span class="tag">&lt;<span class="name">value</span>&gt;</span> </span><span class="xml"><span class="tag">&lt;<span class="name">days</span>&gt;</span> [toaddress] [valuetype]</span></span><br><span class="line"><span class="xml">name_delete </span><span class="xml"><span class="tag">&lt;<span class="name">name</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><p>这里我们使用name_show命令查看magicming.lib的dns解析记录，命令如下：<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name_show <span class="symbol">dns:</span>magicming.<span class="keyword">lib</span></span><br></pre></td></tr></table></figure></p><p>返回记录如下，我们成功读取了A记录：<br><img src="/2019/04/emerdns/nameshow.jpg" alt="p"></p><h2 id="使用emercoin命令行"><a href="#使用emercoin命令行" class="headerlink" title="使用emercoin命令行"></a>使用emercoin命令行</h2><p>emerCoin官网提供了emercoin 命令行，支持ubuntu、debian、centos，下载地址<a href="https://emercoin.com/en/documentation/install-software/core-wallets/cli-daemon" target="_blank" rel="noopener">点这里</a>。<br><a href="https://magicming.cc">迈萌</a>我这里以ubuntu16为例，安装步骤如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> apt-key adv --keyserver keyserver.ubuntu.com --recv B58C58F4</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> add-apt-repository <span class="string">'deb http://download.emercoin.com/ubuntu xenial emercoin'</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> apt update &amp;&amp; apt -y install emercoin</span></span><br></pre></td></tr></table></figure><p>安装完毕后首先启动对应服务，命令如下：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service emercoind start</span><br></pre></td></tr></table></figure></p><p>然后服务在后台开始自动同步区块，同步期间试了下不能读取NVS。同步完成后，执行以下命令即可解析域名：</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">emc name_show <span class="symbol">dns:</span>magicming.<span class="keyword">lib</span></span><br></pre></td></tr></table></figure><h1 id="病毒爱上emerDNS的理由"><a href="#病毒爱上emerDNS的理由" class="headerlink" title="病毒爱上emerDNS的理由"></a>病毒爱上emerDNS的理由</h1><p>对比传统域名解析，我们能感受到emerDNS有以下优势：</p><ul><li><p>传统情报库不一定会收录这类非标准域名</p></li><li><p>emerDNS去中心化，无法通过ICANN成员单位来sinkhole该域名</p></li><li><p>emerDNS更健壮，更具有所有权</p></li><li><p>增大安全人员分析难度</p></li></ul><p>可以预测也正在发生，基于区块链的各种技术，会越来越多的用在传统黑产中。</p><h1 id="怎样防御emerDNS"><a href="#怎样防御emerDNS" class="headerlink" title="怎样防御emerDNS"></a>怎样防御emerDNS</h1><p>仅从监测感知层面来说，可以在情报库中加入以下数据，增强感知力：</p><ul><li>各种非标准域名后缀</li><li>可疑非标准域名对应的ip</li><li>openNIC DNS列表（用这个NDS的不是极客就是黑产）</li><li>……</li></ul><p>直接干掉emerDNS，目前没什么好想法。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;前段时间看360netlab的一篇文章&lt;a href=&quot;https://blog.netlab.360.com/fbot-a-satori-related-block-chain-dns-based-worm/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;
      
    
    </summary>
    
      <category term="区块链安全" scheme="https://magicming.cc/categories/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%AE%89%E5%85%A8/"/>
    
    
      <category term="emerdns" scheme="https://magicming.cc/tags/emerdns/"/>
    
      <category term="emercoin" scheme="https://magicming.cc/tags/emercoin/"/>
    
      <category term="区块链DNS" scheme="https://magicming.cc/tags/%E5%8C%BA%E5%9D%97%E9%93%BEDNS/"/>
    
  </entry>
  
  <entry>
    <title>隐私保护工具收集</title>
    <link href="https://magicming.cc/2019/04/privacy-tools/"/>
    <id>https://magicming.cc/2019/04/privacy-tools/</id>
    <published>2019-04-11T01:16:01.000Z</published>
    <updated>2019-04-11T01:37:22.185Z</updated>
    
    <content type="html"><![CDATA[<p>本文用于记录一些隐私保护、去中心化工具，抽空研究，不定期更新。</p><h1 id="网盘"><a href="#网盘" class="headerlink" title="网盘"></a>网盘</h1><p>upload.ee</p><p>anonfiles.com</p><h1 id="图床"><a href="#图床" class="headerlink" title="图床"></a>图床</h1><p>thyrsi.com</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;本文用于记录一些隐私保护、去中心化工具，抽空研究，不定期更新。&lt;/p&gt;
&lt;h1 id=&quot;网盘&quot;&gt;&lt;a href=&quot;#网盘&quot; class=&quot;headerlink&quot; title=&quot;网盘&quot;&gt;&lt;/a&gt;网盘&lt;/h1&gt;&lt;p&gt;upload.ee&lt;/p&gt;
&lt;p&gt;anonfiles.com&lt;
      
    
    </summary>
    
      <category term="未分类" scheme="https://magicming.cc/categories/%E6%9C%AA%E5%88%86%E7%B1%BB/"/>
    
    
  </entry>
  
</feed>
